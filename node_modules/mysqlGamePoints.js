/* Eduardo Oviedo Blanco
 * eduardo.oviedo@gmail.com
 * MySQL connection module
 */

var mysql = require('mysql');

var credentials = {};
if (process.env.VCAP_SERVICES) {
  var configuration = JSON.parse(process.env.VCAP_SERVICES);
  credentials = configuration['mysql-5.1'][0]['credentials'];
}else{
  console.log('No envioroment variable found, using local setings intead.');
  credentials.host = '127.0.0.1';
  credentials.port = '10000';
  credentials.user = 'uTId1ii2kge39';
  credentials.password = 'p9xJZhOAiZtSU';
};

var connection = mysql.createConnection({
  host     : credentials.host,
  port     : credentials.port,
  user     : credentials.user,
  password : credentials.password
});

exports.connection = connection;